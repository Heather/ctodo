@echo off
echo ----------------------------------------------------------------------------------------------
echo   Clean binaries
echo ----------------------------------------------------------------------------------------------
if exist test.exe (
    del test.exe
)
echo Done
echo ----------------------------------------------------------------------------------------------
echo   Make
echo ----------------------------------------------------------------------------------------------
make -f Makefile.win

echo ----------------------------------------------------------------------------------------------
echo   Clean up test stuff
echo ----------------------------------------------------------------------------------------------
:: real path for MinGW follows linux 
:: -> %SYSTEMDRIVE%%HOMEPATH%\\todo.db3
:: but we won't hurt it.
if exist testdb.db3 (
    del testdb.db3
)
if exist testout (
    del testout
)
echo ----------------------------------------------------------------------------------------------
echo   Running CToDo Tests
echo ----------------------------------------------------------------------------------------------
set todo=todo.exe
%todo% --help
echo ----------------------------------------------------------------------------------------------
echo        Initdb
echo ----------------------------------------------------------------------------------------------
%todo% initdb --db testdb.db3
echo ----------------------------------------------------------------------------------------------
echo        Write
echo ----------------------------------------------------------------------------------------------
%todo% Long string and there is no mistakes parsing me My maximum is 255 so Im not 255 --db testdb.db3
%todo% I contain weird symbols alike -+=!@#$%^&*() and there is still no errors --db testdb.db3
%todo% --first I am Chuck Norris --db testdb.db3
%todo% --motivate motivation test --db testdb.db3
%todo% --db testdb.db3
echo ----------------------------------------------------------------------------------------------
echo        Swap
echo ----------------------------------------------------------------------------------------------
%todo% swap 2 3 --db testdb.db3
%todo% --db testdb.db3
echo ----------------------------------------------------------------------------------------------
echo        Remove
echo ----------------------------------------------------------------------------------------------
%todo% rm 3 --db testdb.db3
%todo% --db testdb.db3
echo ----------------------------------------------------------------------------------------------
echo        Edit
echo ----------------------------------------------------------------------------------------------
%todo% edit 2 Im new string --db testdb.db3
%todo% --db testdb.db3
echo ----------------------------------------------------------------------------------------------
echo        Sync
echo ----------------------------------------------------------------------------------------------
%todo% set git 0 --db testdb.db3
%todo% set syncfile testout --db testdb.db3
%todo% sync --db testdb.db3
echo ----------------------------------------------------------------------------------------------
type testout
echo ----------------------------------------------------------------------------------------------
echo   Post clean up test stuff
echo ----------------------------------------------------------------------------------------------
del testdb.db3
del testout
echo ----------------------------------------------------------------------------------------------
echo        tests passed
echo ----------------------------------------------------------------------------------------------

pause